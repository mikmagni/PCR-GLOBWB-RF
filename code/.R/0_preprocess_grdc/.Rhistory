# set directories
grdcDir <- '../ready/grdc_discharge/'
stationInfo <- read.csv('../data/stationLatLon.csv')
####-------------------------------####
source('fun_0_loadLibrary.R')
setwd("C:/Users/6574882/AppData/Roaming/MobaXterm/home/PCR-GLOBWB-RF/grdc_discharge_reanalysis/code")
ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, repos='http://cran.us.r-project.org')
# sapply(pkg, require, character.only = TRUE)
}
####-------------------------------####
source('fun_0_loadLibrary.R')
i=1
station_no <- stationInfo$grdc_no[i]
print(station_no)
stationInfo <- read.csv('../ready/stationLatLon.csv')
station_no <- stationInfo$grdc_no[i]
print(station_no)
grdc <- read.csv(paste0(grdcDir,'grdc_', station_no,'.csv'))
View(grdc)
missing <- sum(is.na(grdc$obs))
missing% <- (sum(is.na(grdc$obs)))/nrow(grdc)
(sum(is.na(grdc$obs)))
(nrow(grdc))
missing% <-  sum(is.na(grdc$obs)) / (nrow(grdc))
missing% <- missing/rows
missing <- missing/rows
rows <- nrow(grdc)
# calculate missing percentage
missing_perc <- sum(is.na(grdc$obs)) / nrow(grdc)
# calculate missing percentage
missing_perc <- sum(is.na(grdc$obs)) / nrow(grdc) * 100
# calculate missing percentage
missing_perc <- round((sum(is.na(grdc$obs)) / nrow(grdc) * 100), 3)
# calculate missing percentage
missing_perc <- round((sum(is.na(grdc$obs)) / nrow(grdc) * 100), 2)
source('fun_1_calculate_missing.R')
missing_list <- lapply(1:nrow(stationInfo), calculate_missing)
missing_col <- rbind(missing_list)
View(missing_col)
missing_col <- do.call(rbind,missing_list)
summary(missing_col)
View(missing_col)
names(missing_col) <- 'miss'
View(missing_col)
names(missing_col[1]) <- 'miss'
View(missing_col)
missing_col <- do.call(rbind,missing_list) %>% rename(.,V1=miss)
missing_col <- do.call(rbind,missing_list) %>% rename(V1=miss)
colnames(missing_col) <- 'miss'
View(missing_col)
stationInfo$miss <- missing_col
View(stationInfo)
stationInfo <- missing_col
stationInfo <- read.csv('../ready/stationLatLon.csv')
missing_col <- do.call(rbind,missing_list)
colnames(missing_col) <- 'miss'
summary(missing_col)
cbind(stationInfo,missing_col)
write.csv(stationInfo, '../ready/stationLatLon.csv', row.names=F)
View(stationInfo)
stationInfo <- cbind(stationInfo,missing_col)
write.csv(stationInfo, '../ready/stationLatLon.csv', row.names=F)
